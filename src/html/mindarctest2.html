<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
    <title>MindArc Exercise 2</title>
    <style type="text/css" media="screen">
      .accordion-border-none {
         border: none !important;
      }
      @media only screen and (min-width: 768px){
         .accordion-header {
            display: none !important;
         }
         .accordion {
            display: flex;
            flex-direction: row;
         }
      }
      @media only screen and (max-width: 767px) {
         .nav {
            display: none !important;
         }
         .accordion {
            flex-direction: column;
         }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <button class="nav-link active" data-bs-toggle="collapse" data-bs-target="#collapseOne" type="button" role="tab" aria-controls="collapseOne" aria-selected="true"></button>
          <button class="nav-link" data-bs-toggle="collapse" data-bs-target="#collapseTwo" type="button" role="tab" aria-controls="collapseTwo" aria-selected="false"></button>
          <button class="nav-link" data-bs-toggle="collapse" data-bs-target="#collapseThree" type="button" role="tab" aria-controls="collapseThree" aria-selected="false"></button>
          <button class="nav-link" data-bs-toggle="collapse" data-bs-target="#collapseFour" type="button" role="tab" aria-controls="collapseFour" aria-selected="false"></button>
        </div>
      </nav>
      <div class="accordion" id="accordionParent">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
               Error! data.json not loaded
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionParent">
            <div class="accordion-body">
               Error! data.json not loaded
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
               Error! data.json not loaded
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionParent">
            <div class="accordion-body">
               Error! data.json not loaded
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
               Error! data.json not loaded
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionParent">
            <div class="accordion-body">
               Error! data.json not loaded
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingFour">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseThree">
               Error! data.json not loaded
            </button>
          </h2>
          <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionParent">
            <div class="accordion-body">
               Error! data.json not loaded
            </div>
          </div>
        </div>
      </div>
    </div>
   

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script>
       fetch('https://raw.githubusercontent.com/mindarc/frontend-assessment/master/data.json')
         .then(response => response.json())
         .then(data => appendData(data))
         .catch(err => console.log('error' + err));
       appendData = (data) => {
            //var sectionContainer = document.getElementById("section1");
            var navLink = document.getElementsByClassName('nav-link');
            var accordionButton = document.getElementsByClassName('accordion-button');
            var accordionBody = document.getElementsByClassName('accordion-body'); 
            Array.from(data).forEach((datum, index) => {
              navLink[index].innerHTML = datum.title;
              accordionBody[index].innerHTML = datum.content;
              accordionButton[index].innerHTML = datum.title;
            });
            //sectionSpan.innerHTML = data[1].title;
            //sectionContainer.appendChild(sectionSpan);   
            //for(i = 0; i <=data.length; i++){
               //var sectionSpan = document.createElement("span");
            //   accordionButton[i].innerHTML = data[i].title;
            //   accordionBody[i].innerHTML = data[i].content;
               //sectionSpan.innerHTML = data[i].title;
               //accordionButton[i].appendChild(sectionSpan);
             //}
            // for(i = 0; i < data.length; i++) {
            //   var accordionSpan = document.createElement("span");
            //   accordionSpan.innerHTML = data[i].content;
            //   accordionBody[i].appendChild(accordionSpan);
            //   accordionSpan.innerHTML = data[i].title;
            //   accordionButton[i].appendChild(accordionSpan);
            // }
         };
       var getAccordionItems = document.getElementsByClassName('accordion-item');
       var mediaQueryList = window.matchMedia("(min-width: 768px)");
       mediaQueryList.addEventListener("change", (mql) => {
         Array.from(getAccordionItems).forEach((accordionItem) => {
            if(mql.matches) {
                accordionItem.classList.add("accordion-border-none"); // enter class when 768px reached
             }
            else {
                accordionItem.classList.remove("accordion-border-none"); //remove class when 767 reached
            }
         });
      });
    </script>

  </body>
</html>

